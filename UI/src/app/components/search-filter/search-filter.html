<div class="search-filter-card">
    <div class="search-section">
        <div class="search-box">
            <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
            </svg>
            <input type="text" placeholder="Search posts..." [(ngModel)]="searchText" (input)="onSearchInput()">
        </div>

        <div class="controls-section">
            <div class="dropdown-wrapper">
                <button class="control-btn" (click)="toggleSortDropdown()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <polyline points="19 12 12 19 5 12"></polyline>
                    </svg>
                    Sort By
                    <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
                @if (showSortDropdown) {
                <div class="dropdown-menu">
                    @for (option of sortOptions; track option.value) {
                    <button class="dropdown-item" [class.active]="selectedSort === option.value"
                        (click)="onSortSelect(option.value)">
                        {{ option.label }}
                    </button>
                    }
                </div>
                }
            </div>

            <div class="dropdown-wrapper">
                <button class="control-btn" (click)="toggleChannelDropdown()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                    </svg>
                    Channels
                    <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
                @if (showChannelDropdown) {
                <div class="dropdown-menu checkbox-menu">
                    @for (channel of channels; track channel) {
                    <label class="checkbox-item">
                        <input type="checkbox" [checked]="selectedChannels.has(channel)"
                            (change)="onChannelToggle(channel)">
                        <span>{{ channel }}</span>
                    </label>
                    }
                    @if (channels.length === 0) {
                    <div class="empty-message">No channels available</div>
                    }
                </div>
                }
            </div>
        </div>
    </div>

    <!-- Content Type Filter Buttons -->
    <div class="content-type-filters">
        @for (button of contentTypeButtons; track button.value) {
        <button class="filter-button" [class.active]="isContentTypeActive(button.value)"
            (click)="onContentTypeClick(button.value)">
            {{ button.label }}
        </button>
        }
    </div>
</div>